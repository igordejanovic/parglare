<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Igor Dejanović">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Debugging - parglare</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../style.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Debugging";
    var mkdocs_page_input_path = "debugging.md";
    var mkdocs_page_url = "/debugging/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68681917-1', 'igordejanovic.net');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> parglare</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../getting_started/">Getting started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../grammar/">Grammar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../parser/">Parser parameters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../actions/">Actions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recognizers/">Recognizers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../conflicts/">Conflicts resolving</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../parse_trees/">Parse trees</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recovery/">Error recovery</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../pglr/">pglr command</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Debugging</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#tracing-and-debugging">Tracing and debugging</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../about/CONTRIBUTING/">Contributing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../about/LICENSE/">License</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">parglare</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>User Guide &raquo;</li>
        
      
    
    <li>Debugging</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/igordejanovic/parglare/edit/master/docs/debugging.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="tracing-and-debugging">Tracing and debugging<a class="headerlink" href="#tracing-and-debugging" title="Permanent link">&para;</a></h1>
<p>When the parser doesn't work as expected there are several options. First, you
can use <a href="../pglr/">pglr command</a> to visualize LR PDA automata and GLR trace.
The same command can also be used to print detailed information on the grammar,
LR states and conflicts.</p>
<p>Printing detailed debug information on grammar can be also achieved by putting
the grammar in the debug mode:</p>
<pre><code>grammar = Grammar.from_file(file_name, debug=True)
</code></pre>
<p>For example, <code>calc</code> grammar from the quick intro would give the following
output:</p>
<pre><code>*** GRAMMAR ***
Terminals:
EMPTY - * ^ + STOP ( \d+(\.\d+)? number / EOF )
NonTerminals:
E S'
Productions:
0: S' = E STOP
1: E = E + E
2: E = E - E
3: E = E * E
4: E = E / E
5: E = E ^ E
6: E = ( E )
7: E = number
</code></pre>
<p>During grammar object construction, grammar file is parsed using the parglare
itself and the grammar object for the new language is constructed. If you want
to see the debug output of this process set the <code>parse_debug</code> parameter to
<code>True</code>:</p>
<pre><code>grammar = Grammar.from_file(file_name, parse_debug=True)
</code></pre>
<p>If you are using <a href="../recognizers/">custom recognizers</a> or would like to see the
result of each <a href="../actions/">action</a> in debug output then you should put the
parser in the debug mode from the code.</p>
<p>To put the parser in the debug mode do:</p>
<pre><code>parser = Parser(grammar, debug=True)
</code></pre>
<p>To debug <a href="../grammar/#handling-whitespaces-and-comments">layout grammar</a> do:</p>
<pre><code>parser = Parser(grammar, debug_layout=True)
</code></pre>
<p><code>GLRParser</code> can produce visual trace. To enable visual tracing set <code>debug</code> and
<code>debug_trace</code> to <code>True</code>:</p>
<pre><code>parser = GLRParser(grammar, debug=True, debug_trace=True)
</code></pre>
<p>Debug output and visual trace can be generated using <a href="../pglr/">pglr command</a>.
For example, parsing expression <code>1 + 2 * 3</code> with <code>GLRParser</code> in debug mode will
produce the following output (this output is generated by <code>pglr -i trace calc.pg
"1 + 2 * 3"</code>):</p>
<pre><code>Grammar OK.


*** STATES ***

State 0
        0: S' = . E STOP   {}
        1: E = . E + E   {STOP, ^, ), /, *, -, +}
        2: E = . E - E   {STOP, ^, ), /, *, -, +}
        3: E = . E * E   {STOP, ^, ), /, *, -, +}
        4: E = . E / E   {STOP, ^, ), /, *, -, +}
        5: E = . E ^ E   {STOP, ^, ), /, *, -, +}
        6: E = . ( E )   {STOP, ^, ), /, *, -, +}
        7: E = . number   {STOP, ^, ), /, *, -, +}



        GOTO:
        E-&gt;1

        ACTIONS:
        (-&gt;SHIFT:2, number-&gt;SHIFT:3

....
....

*** PARSING STARTED

        Skipping whitespaces: ''
        New position: (1, 0)

**REDUCING HEADS
Active heads 1: [state=0:S', pos=0, endpos=0, empty=[False,True], parents=0, trees=1]
Number of trees = 1

Reducing head: state=0:S', pos=0, endpos=0, empty=[False,True], parents=0, trees=1
        Skipping whitespaces: ''
        New position: (1, 0)
        Position: (1, 0)
        Context: *1 + 2 * 3
        Symbols expected: ['(', 'number']
        Token(s) ahead: [&lt;number(1)&gt;]

        New head for shifting: state=0:S', pos=0, endpos=0, token
              ahead=&lt;number(1)&gt;, empty=[False,True], parents=0, trees=1.

        No more reductions for this head and lookahead token &lt;number(1)&gt;.

**SHIFTING HEADS
Active heads 1: [state=0:S', pos=0, endpos=0, token ahead=&lt;number(1)&gt;,
     empty=[False,True], parents=0, trees=1]
Number of trees = 1

Shifting head: state=0:S', pos=0, endpos=0, token ahead=&lt;number(1)&gt;,
     empty=[False,True], parents=0, trees=1
        Position: (1, 0)
        Context: *1 + 2 * 3
        Token(s) ahead: &lt;number(1)&gt;

        Shift:3 "1" at position (1, 0)
        Action result = type:&lt;class 'parglare.parser.NodeTerm'&gt;
            value:&lt;Term(start=0, end=1, sym=number, val="1")&gt;
        New shifted head state=3:number, pos=0, endpos=1, empty=[False,True],
            parents=0, trees=0.
        Creating link   from head state=3:number, pos=0, endpos=1,
                            empty=[False,False], parents=1, trees=1
                  to head   state=0:S', pos=0, endpos=0, token
                            ahead=&lt;number(1)&gt;, empty=[False,True],
                            parents=0, trees=1
 ....
 ....

 Reducing head: state=1:E, pos=0, endpos=9, token ahead=&lt;STOP()&gt;,
       empty=[False,False], parents=1, trees=1
    Position: (1, 9)
    Context: 1 + 2 * 3*
    Symbols expected: ['STOP']
    Token(s) ahead: &lt;STOP()&gt;

    *** SUCCESS!!!!
  *** 1 sucessful parse(s).
  Generated file parglare_trace.dot.
</code></pre>
<p>In addition, a <a href="../pglr/#tracing-glr-parsing">visualization of GLR trace</a> is
produced as a Graphviz dot file.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../about/CONTRIBUTING/" class="btn btn-neutral float-right" title="Contributing">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../pglr/" class="btn btn-neutral" title="pglr command"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2017 <a href="http://igordejanovic.net/">Igor Dejanović</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/igordejanovic/parglare" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../pglr/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../about/CONTRIBUTING/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
