<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Igor Dejanović">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Handling errors - parglare</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../style.css" rel="stylesheet">
  <link href="../css/version-select.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Handling errors";
    var mkdocs_page_input_path = "handling_errors.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68681917-1', 'igordejanovic.net');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> parglare</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">User Guide</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../getting_started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="../grammar_language/">Grammar language</a>
                </li>
                <li class="">
                    
    <a class="" href="../grammar/">Grammar class</a>
                </li>
                <li class="">
                    
    <a class="" href="../parser/">Parser</a>
                </li>
                <li class="">
                    
    <a class="" href="../actions/">Actions</a>
                </li>
                <li class="">
                    
    <a class="" href="../common/">Common API</a>
                </li>
                <li class="">
                    
    <a class="" href="../recognizers/">Recognizers</a>
                </li>
                <li class="">
                    
    <a class="" href="../grammar_modularization/">Modularization</a>
                </li>
                <li class="">
                    
    <a class="" href="../lr_parsing/">LR parsing and conflicts</a>
                </li>
                <li class="">
                    
    <a class="" href="../disambiguation/">Disambiguation</a>
                </li>
                <li class="">
                    
    <a class="" href="../parse_trees/">Parse trees</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Handling errors</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#handling-errors">Handling errors</a></li>
    

    <li class="toctree-l3"><a href="#error-recovery">Error recovery</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#custom-recovery-strategy">Custom recovery strategy</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../pglr/">pglr command</a>
                </li>
                <li class="">
                    
    <a class="" href="../debugging/">Debugging</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../about/CONTRIBUTING/">Contributing</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/LICENSE/">License</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">parglare</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>User Guide &raquo;</li>
        
      
    
    <li>Handling errors</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/igordejanovic/parglare/edit/master/docs/handling_errors.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="handling-errors">Handling errors<a class="headerlink" href="#handling-errors" title="Permanent link">&para;</a></h1>
<p>When parglare encounters a situation in which no SHIFT or REDUCE operation could
be performed it will report an error by raising an instance of
<code>parglare.ParseError</code> class.</p>
<p><code>ParseError</code> has the following attributes:</p>
<ul>
<li>
<p><strong>location</strong> - an instance of the <a href="../common/#location-class">Location class</a>
  with information of the position and span of the error.</p>
</li>
<li>
<p><strong>symbols_expected (list)</strong> - a list of expected symbol at the location.</p>
</li>
<li>
<p><strong>tokens_ahead (list)</strong> - a list of tokens recognized at the position by
  trying all terminal symbols recognizers from the grammar. Note that this list
  might be empty in case nothing can be recognized at the position or it might
  have more than one element if more recognizers succeeds (lexical ambiguity).</p>
</li>
<li>
<p><strong>symbols_before (list)</strong> - a list of last seen symbols. In the case of LR
  parser it will always be a single element list. In the case of GLR there might
  be more symbols if there were multiple parser heads.</p>
</li>
</ul>
<h1 id="error-recovery">Error recovery<a class="headerlink" href="#error-recovery" title="Permanent link">&para;</a></h1>
<p>There are a lot of situations where you would want parser to report all the
errors in one go. To do this, parser has to recover from errors, i.e. get to
the valid state and continue.</p>
<p>To enable error recovery set <code>error_recovery</code> <a href="../parser/#error_recovery">parameter of parser
construction</a> to <code>True</code>. This will enable implicit
error recovery strategy that will simply drop characther/object at the place of
the error and try to continue. All errors will be collected as an <code>errors</code> list
on the parser instance.</p>
<p>Each error is an instance of <a href="#handling-errors"><code>ParseError</code> class</a>. In case no
recovery is possible last <code>ParseError</code> will be raised.</p>
<h2 id="custom-recovery-strategy">Custom recovery strategy<a class="headerlink" href="#custom-recovery-strategy" title="Permanent link">&para;</a></h2>
<p>To provide a custom strategy for error recovery set <code>error_recovery</code> to a Python
function. This function should have the following signature:</p>
<pre><code>def error_recovery_strategy(context, error):
    ...
</code></pre>
<ul>
<li><strong>context</strong> - the <a href="../common/#the-context-object">context object</a> at the
  place where error occured.</li>
<li><strong>error</strong> - <a href="#handling-errors"><code>ParseError</code> instance</a>.</li>
</ul>
<p>Using the context object you can query the state of the parser. E.g. to get the
position use <code>context.position</code>, to get the parser state use <code>context.state</code>, to
get expected symbols in this state use <code>context.state.actions.keys()</code>.</p>
<p>To get information about the error use <code>error</code> object. E.g. to get expected
symbols at this position for which parser can succesfully continue use
<code>error.symbols_expected</code>.</p>
<p>The recovery function should return the tuple <code>(token, position)</code>. <code>position</code>
should be a new position where the parser should continue or <code>None</code> if position
should not change. <code>token</code> should be a new token introduced at the given
position or <code>None</code> if no new token is introduced. If both <code>token</code> and <code>position</code>
are <code>None</code> error recovery didn't succeed.</p>
<p>The <code>token</code> symbol should be from the <code>error.symbols_expected</code> for the parser to
recover successfully. <code>token</code> should be an instance of
<a href="../parser/#token"><code>parser.Token</code></a>. This class constructor accepts <code>symbol</code>,
<code>value</code> and <code>length</code>. <code>symbol</code> should be a grammar symbol from
<code>expected_symbols</code>, <code>value</code> should be a matched part of the input (actually, in
the context of error recovery this value is a made-up value) and length is the
length of the token. For introduced tokens, length should be set to 0.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pglr/" class="btn btn-neutral float-right" title="pglr command">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../parse_trees/" class="btn btn-neutral" title="Parse trees"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; <a href="http://igordejanovic.net/">Igor Dejanović</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/igordejanovic/parglare/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../parse_trees/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../pglr/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../js/version-select.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
